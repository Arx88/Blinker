---
description: O backend expõe seus serviços através de uma API FastAPI definida em @api.py.
globs: 
alwaysApply: false
---
# API e Endpoints do Backend

O backend expõe seus serviços através de uma API FastAPI definida em [api.py](mdc:backend/api.py).

## Estrutura da API
- A API principal está definida em [backend/api.py](mdc:backend/api.py)
- APIs específicas para agentes estão em [backend/agent/api.py](mdc:backend/agent/api.py)

## Convenções para Endpoints
1. Todos os endpoints devem ter documentação clara via docstrings
2. Use tipagem com Pydantic para todos os modelos de entrada e saída
3. Organize endpoints por domínio ou funcionalidade
4. Implemente validação adequada para todos os inputs
5. Utilize os códigos de status HTTP apropriados para as respostas
6. Todos os endpoints devem ter tratamento de erro adequado
7. A autenticação deve ser implementada consistentemente

## Segurança e Performance
1. Implemente rate limiting para endpoints críticos
2. Valide e sanitize todos os inputs para prevenir injeções
3. Endpoints que processam operações longas devem ser assíncronos
4. Use middleware para funcionalidades transversais (logging, autenticação, etc.)
5. Documente limitações de taxa e timeouts quando relevante

